<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data Manipulation in R | Data Wrangling and Analysis with R</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data Manipulation in R | Data Wrangling and Analysis with R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data Manipulation in R | Data Wrangling and Analysis with R" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Centre for Epidemiological Modelling and Analysis" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="getting-started-with-r.html"/>
<link rel="next" href="data-wrangling.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Minimal Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#why-r"><i class="fa fa-check"></i><b>1.1</b> Why R?</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#what-can-r-do"><i class="fa fa-check"></i><b>1.2</b> What can R do?</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#basics-of-r"><i class="fa fa-check"></i><b>1.3</b> Basics of R</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#the-r-console"><i class="fa fa-check"></i><b>1.4</b> The <strong>R</strong> console</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#r-workspaces"><i class="fa fa-check"></i><b>1.5</b> R workspaces</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#useful-tips-for-r"><i class="fa fa-check"></i><b>1.6</b> Useful tips for <strong>R</strong></a></li>
<li class="chapter" data-level="1.7" data-path="index.html"><a href="index.html#r-resources-and-finding-help"><i class="fa fa-check"></i><b>1.7</b> <strong>R</strong> resources and finding help</a></li>
<li class="chapter" data-level="1.8" data-path="index.html"><a href="index.html#r-architecture"><i class="fa fa-check"></i><b>1.8</b> <strong>R</strong> architecture</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html"><i class="fa fa-check"></i><b>2</b> Getting started with R</a><ul>
<li class="chapter" data-level="2.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#installing-and-using-r-packages"><i class="fa fa-check"></i><b>2.1</b> Installing and using <strong>R</strong> packages</a></li>
<li class="chapter" data-level="2.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#creating-objects-in-r"><i class="fa fa-check"></i><b>2.2</b> Creating objects in <strong>R</strong></a></li>
<li class="chapter" data-level="2.3" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#functions-in-r"><i class="fa fa-check"></i><b>2.3</b> Functions in <strong>R</strong></a></li>
<li class="chapter" data-level="2.4" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#data-types-and-importation"><i class="fa fa-check"></i><b>2.4</b> Data types and importation</a></li>
<li class="chapter" data-level="2.5" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#importing-and-data-manipulation-in-r"><i class="fa fa-check"></i><b>2.5</b> Importing and Data manipulation in R</a><ul>
<li class="chapter" data-level="2.5.1" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#in-built-datasets"><i class="fa fa-check"></i><b>2.5.1</b> In-built datasets</a></li>
<li class="chapter" data-level="2.5.2" data-path="getting-started-with-r.html"><a href="getting-started-with-r.html#import-data-from-external-files"><i class="fa fa-check"></i><b>2.5.2</b> Import data from ``external" files</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-manipulation-in-r.html"><a href="data-manipulation-in-r.html"><i class="fa fa-check"></i><b>3</b> Data Manipulation in R</a><ul>
<li class="chapter" data-level="3.1" data-path="data-manipulation-in-r.html"><a href="data-manipulation-in-r.html#dereferencing"><i class="fa fa-check"></i><b>3.1</b> Dereferencing</a><ul>
<li class="chapter" data-level="3.1.1" data-path="data-manipulation-in-r.html"><a href="data-manipulation-in-r.html#merging-data"><i class="fa fa-check"></i><b>3.1.1</b> Merging data</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-manipulation-in-r.html"><a href="data-manipulation-in-r.html#subsetting-data"><i class="fa fa-check"></i><b>3.1.2</b> Subsetting data</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-manipulation-in-r.html"><a href="data-manipulation-in-r.html#substring"><i class="fa fa-check"></i><b>3.1.3</b> Substring</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="data-wrangling.html"><a href="data-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data wrangling</a><ul>
<li class="chapter" data-level="4.1" data-path="data-wrangling.html"><a href="data-wrangling.html#tools-for-manipulating-data"><i class="fa fa-check"></i><b>4.1</b> Tools for manipulating data</a></li>
<li class="chapter" data-level="4.2" data-path="data-wrangling.html"><a href="data-wrangling.html#making-datasets-tidy"><i class="fa fa-check"></i><b>4.2</b> Making datasets tidy</a></li>
<li class="chapter" data-level="4.3" data-path="data-wrangling.html"><a href="data-wrangling.html#pipes-in-r"><i class="fa fa-check"></i><b>4.3</b> Pipes in R %&gt;%</a></li>
<li class="chapter" data-level="4.4" data-path="data-wrangling.html"><a href="data-wrangling.html#gather"><i class="fa fa-check"></i><b>4.4</b> gather()</a></li>
<li class="chapter" data-level="4.5" data-path="data-wrangling.html"><a href="data-wrangling.html#grouping-data"><i class="fa fa-check"></i><b>4.5</b> Grouping data</a></li>
<li class="chapter" data-level="4.6" data-path="data-wrangling.html"><a href="data-wrangling.html#separate"><i class="fa fa-check"></i><b>4.6</b> separate()</a></li>
<li class="chapter" data-level="4.7" data-path="data-wrangling.html"><a href="data-wrangling.html#a-sample-data-set"><i class="fa fa-check"></i><b>4.7</b> A sample data set</a></li>
<li class="chapter" data-level="4.8" data-path="data-wrangling.html"><a href="data-wrangling.html#summarise"><i class="fa fa-check"></i><b>4.8</b> summarise()</a></li>
<li class="chapter" data-level="4.9" data-path="data-wrangling.html"><a href="data-wrangling.html#filter-rowsobservations-with-matching-conditions"><i class="fa fa-check"></i><b>4.9</b> filter() rows/observations with matching conditions</a></li>
<li class="chapter" data-level="4.10" data-path="data-wrangling.html"><a href="data-wrangling.html#distinct"><i class="fa fa-check"></i><b>4.10</b> distinct()</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Data Wrangling and Analysis with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-manipulation-in-r" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data Manipulation in R</h1>
<div id="dereferencing" class="section level2">
<h2><span class="header-section-number">3.1</span> Dereferencing</h2>
<p>In R, dereferencing means getting a specific part of an object. This is perhaps one of the key operations you will frequently use when manipulating data</p>
<ul>
<li>Lets start with an array:</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-manipulation-in-r.html#cb1-1"></a>a1 &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dt">from=</span><span class="dv">11</span>, <span class="dt">to=</span><span class="dv">53</span>, <span class="dt">by=</span><span class="dv">3</span>)</span>
<span id="cb1-2"><a href="data-manipulation-in-r.html#cb1-2"></a>a1</span></code></pre></div>
<pre><code>##  [1] 11 14 17 20 23 26 29 32 35 38 41 44 47 50 53</code></pre>
<p>Supposing you want the 3rd and 6th element of the array <strong>a1</strong></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-manipulation-in-r.html#cb3-1"></a>a1[<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">6</span>)]</span></code></pre></div>
<pre><code>## [1] 17 26</code></pre>
<p>Form a matrix using the function <em>matrix()</em> on object <em>a1</em></p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-manipulation-in-r.html#cb5-1"></a>a2 &lt;-<span class="st"> </span><span class="kw">matrix</span>(a1, <span class="dt">ncol=</span><span class="dv">3</span>, <span class="dt">byrow=</span><span class="ot">TRUE</span>)</span>
<span id="cb5-2"><a href="data-manipulation-in-r.html#cb5-2"></a>a2</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]   11   14   17
## [2,]   20   23   26
## [3,]   29   32   35
## [4,]   38   41   44
## [5,]   47   50   53</code></pre>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-manipulation-in-r.html#cb7-1"></a>a3 &lt;-<span class="st"> </span><span class="kw">matrix</span>(a1, <span class="dt">ncol=</span><span class="dv">2</span>, <span class="dt">byrow=</span><span class="ot">FALSE</span>)</span></code></pre></div>
<pre><code>## Warning in matrix(a1, ncol = 2, byrow = FALSE): data length [15] is not a sub-
## multiple or multiple of the number of rows [8]</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-manipulation-in-r.html#cb9-1"></a>a3</span></code></pre></div>
<pre><code>##      [,1] [,2]
## [1,]   11   35
## [2,]   14   38
## [3,]   17   41
## [4,]   20   44
## [5,]   23   47
## [6,]   26   50
## [7,]   29   53
## [8,]   32   11</code></pre>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-manipulation-in-r.html#cb11-1"></a><span class="co"># selecting the 2nd column of the matrix</span></span>
<span id="cb11-2"><a href="data-manipulation-in-r.html#cb11-2"></a>a2[,<span class="dv">2</span>]</span></code></pre></div>
<pre><code>## [1] 14 23 32 41 50</code></pre>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="data-manipulation-in-r.html#cb13-1"></a><span class="co"># selecting the 3rd row of the matrix</span></span>
<span id="cb13-2"><a href="data-manipulation-in-r.html#cb13-2"></a>a2[<span class="dv">3</span>,]</span></code></pre></div>
<pre><code>## [1] 29 32 35</code></pre>
<p>If we convert a2 into a dataframe named a4 - we can reference the columns (variables) as follows:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="data-manipulation-in-r.html#cb15-1"></a>a4 &lt;-<span class="st"> </span><span class="kw">data.frame</span>(a2)</span>
<span id="cb15-2"><a href="data-manipulation-in-r.html#cb15-2"></a>a4</span></code></pre></div>
<pre><code>##   X1 X2 X3
## 1 11 14 17
## 2 20 23 26
## 3 29 32 35
## 4 38 41 44
## 5 47 50 53</code></pre>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb17-1"><a href="data-manipulation-in-r.html#cb17-1"></a><span class="co"># selecting column 3</span></span>
<span id="cb17-2"><a href="data-manipulation-in-r.html#cb17-2"></a><span class="co"># variables (columns) can be addressed using the dollar sign $</span></span>
<span id="cb17-3"><a href="data-manipulation-in-r.html#cb17-3"></a>a4<span class="op">$</span>X3</span></code></pre></div>
<pre><code>## [1] 17 26 35 44 53</code></pre>
<p>To get the names of the columns of dataframe, number of rows/columns, dimensions of the dataframe, length of a column use:</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb19-1"><a href="data-manipulation-in-r.html#cb19-1"></a><span class="kw">names</span>(a4)</span></code></pre></div>
<pre><code>## [1] &quot;X1&quot; &quot;X2&quot; &quot;X3&quot;</code></pre>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="data-manipulation-in-r.html#cb21-1"></a><span class="kw">nrow</span>(a4)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="data-manipulation-in-r.html#cb23-1"></a><span class="kw">ncol</span>(a4)</span></code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="data-manipulation-in-r.html#cb25-1"></a><span class="kw">dim</span>(a4)</span></code></pre></div>
<pre><code>## [1] 5 3</code></pre>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="data-manipulation-in-r.html#cb27-1"></a><span class="kw">length</span>(a4<span class="op">$</span>X2)</span></code></pre></div>
<pre><code>## [1] 5</code></pre>
<p>To help learn on data manipulation in R, I have provided you with two .csv datasets; <em>ideal1.csv</em> and <em>ideal2.csv</em>. The two datasets come from a longitudinal cohort study (Infectious Diseases of East African Livestock - IDEAL study) investigating the infection experiences of 548 calves during their first year of life. The study was conducted in Western Kenya between 2007 and 2010.
You can read about the study from <a href="http://www.ncbi.nlm.nih.gov/pubmed/24000820">this publication</a> and <a href="http://www.ilri.org/ideal">this web page</a></p>
<p>The data provided to you is from a  (30) of the 548 IDEAL study subjects, with only a select few of the variables collected.</p>
<p>Briefly:</p>
<ul>
<li><p>Calves were recruited in the first 7 days following birth</p></li>
<li><p>Questionnaires capturing household characteristics, farm management practices etc collected during recruitment visit</p></li>
<li><p>Follow up was done every 5 weeks</p></li>
<li><p>Packed Cell Volume, live weight, infection status with different pathogens (among other parameters) collected every 5 weeks</p></li>
</ul>
<p>If you have an internet connection - you could run the following codes on your console</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="data-manipulation-in-r.html#cb29-1"></a>ideal1 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ThumbiMwangi/R_sources/master/ideal1.csv&quot;</span>)</span>
<span id="cb29-2"><a href="data-manipulation-in-r.html#cb29-2"></a>ideal2 &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&quot;https://raw.githubusercontent.com/ThumbiMwangi/R_sources/master/ideal2.csv&quot;</span>)</span></code></pre></div>
<p>Quick look through the attributes of the dataset</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-manipulation-in-r.html#cb30-1"></a><span class="kw">head</span>(ideal1, <span class="dv">5</span>) <span class="co"># first 5 data rows (default = 6)</span></span></code></pre></div>
<pre><code>##        CalfID CalfSex sublocation     CADOB ReasonsLoss           Education
## 1 CA020610151       1      Karisa 3/11/2007          NA    Secondary school
## 2 CA020610152       1      Karisa 4/10/2007          NA No formal education
## 3 CA010310064       1      Kokare  3/1/2008           7      Primary school
## 4 CA031310367       1   Yiro West  4/6/2008           7      Primary school
## 5 CA051910545       2    Bujwanga  7/4/2008          NA      Primary school
##   Distance_water RecruitWeight
## 1   At household          19.0
## 2          &lt;1 km          23.0
## 3          &lt;1 km          16.5
## 4         1-5 km          20.0
## 5          &lt;1 km          20.0</code></pre>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-manipulation-in-r.html#cb32-1"></a><span class="kw">tail</span>(ideal1)    <span class="co"># last 6 data rows of data ideal2</span></span></code></pre></div>
<pre><code>##         CalfID CalfSex sublocation      CADOB ReasonsLoss        Education
## 25 CA051810529       2      Luanda 25/02/2009          NA   Primary school
## 26 CA041510443       2   Namboboto 25/07/2009          NA Secondary school
## 27 CA051810538       1      Luanda 25/09/2009          NA Secondary school
## 28 CA010210041       1      Kidera 27/06/2008          NA   Primary school
## 29 CA030810228       1       Igero 30/12/2008          NA   Primary school
## 30 CA010110028       1 East Siboti 31/07/2009           7   Primary school
##    Distance_water RecruitWeight
## 25          &lt;1 km          16.5
## 26          &lt;1 km          19.5
## 27          &lt;1 km          18.0
## 28         1-5 km          16.5
## 29          &lt;1 km          22.0
## 30          &lt;1 km          19.0</code></pre>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-manipulation-in-r.html#cb34-1"></a><span class="co"># dimensions number of rows and columns</span></span>
<span id="cb34-2"><a href="data-manipulation-in-r.html#cb34-2"></a><span class="kw">dim</span>(ideal1)</span></code></pre></div>
<pre><code>## [1] 30  8</code></pre>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="data-manipulation-in-r.html#cb36-1"></a><span class="kw">dim</span>(ideal2)</span></code></pre></div>
<pre><code>## [1] 270   9</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="data-manipulation-in-r.html#cb38-1"></a><span class="co">## Attributes of the dataset</span></span>
<span id="cb38-2"><a href="data-manipulation-in-r.html#cb38-2"></a><span class="kw">attributes</span>(ideal1) </span></code></pre></div>
<pre><code>## $names
## [1] &quot;CalfID&quot;         &quot;CalfSex&quot;        &quot;sublocation&quot;    &quot;CADOB&quot;         
## [5] &quot;ReasonsLoss&quot;    &quot;Education&quot;      &quot;Distance_water&quot; &quot;RecruitWeight&quot; 
## 
## $class
## [1] &quot;data.frame&quot;
## 
## $row.names
##  [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
## [26] 26 27 28 29 30</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="data-manipulation-in-r.html#cb40-1"></a><span class="co"># summary of the dataset</span></span>
<span id="cb40-2"><a href="data-manipulation-in-r.html#cb40-2"></a><span class="kw">summary</span>(ideal1)</span></code></pre></div>
<pre><code>##     CalfID             CalfSex      sublocation           CADOB          
##  Length:30          Min.   :1.000   Length:30          Length:30         
##  Class :character   1st Qu.:1.000   Class :character   Class :character  
##  Mode  :character   Median :1.000   Mode  :character   Mode  :character  
##                     Mean   :1.333                                        
##                     3rd Qu.:2.000                                        
##                     Max.   :2.000                                        
##                                                                          
##   ReasonsLoss      Education         Distance_water     RecruitWeight  
##  Min.   : 6.000   Length:30          Length:30          Min.   :14.00  
##  1st Qu.: 7.000   Class :character   Class :character   1st Qu.:17.00  
##  Median : 7.000   Mode  :character   Mode  :character   Median :19.25  
##  Mean   : 8.667                                         Mean   :19.25  
##  3rd Qu.: 7.000                                         3rd Qu.:20.38  
##  Max.   :18.000                                         Max.   :29.00  
##  NA&#39;s   :21</code></pre>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="data-manipulation-in-r.html#cb42-1"></a><span class="co"># description of the variables</span></span>
<span id="cb42-2"><a href="data-manipulation-in-r.html#cb42-2"></a><span class="kw">typeof</span>(ideal1<span class="op">$</span>CalfSex)</span></code></pre></div>
<pre><code>## [1] &quot;integer&quot;</code></pre>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="data-manipulation-in-r.html#cb44-1"></a><span class="kw">typeof</span>(ideal1<span class="op">$</span>sublocation) </span></code></pre></div>
<pre><code>## [1] &quot;character&quot;</code></pre>
<ul>
<li>We now need to change <em>CalfSex</em> from integer to factor and recode the values from <em>1</em> to <em>Male</em> and <em>2</em> to <em>Female</em></li>
</ul>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-manipulation-in-r.html#cb46-1"></a><span class="kw">is.factor</span>(ideal1<span class="op">$</span>CalfSex)</span></code></pre></div>
<pre><code>## [1] FALSE</code></pre>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="data-manipulation-in-r.html#cb48-1"></a>ideal1<span class="op">$</span>CalfSex &lt;-<span class="st"> </span><span class="kw">factor</span>(ideal1<span class="op">$</span>CalfSex)</span>
<span id="cb48-2"><a href="data-manipulation-in-r.html#cb48-2"></a><span class="kw">is.factor</span>(ideal1<span class="op">$</span>CalfSex)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="data-manipulation-in-r.html#cb50-1"></a><span class="co"># determmine levels of factor calfsex</span></span>
<span id="cb50-2"><a href="data-manipulation-in-r.html#cb50-2"></a><span class="co"># recode to ``Male&quot; and ``Female&quot;</span></span>
<span id="cb50-3"><a href="data-manipulation-in-r.html#cb50-3"></a></span>
<span id="cb50-4"><a href="data-manipulation-in-r.html#cb50-4"></a><span class="kw">levels</span>(ideal1<span class="op">$</span>CalfSex)</span></code></pre></div>
<pre><code>## [1] &quot;1&quot; &quot;2&quot;</code></pre>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="data-manipulation-in-r.html#cb52-1"></a><span class="co"># recode variable CalfSex</span></span>
<span id="cb52-2"><a href="data-manipulation-in-r.html#cb52-2"></a><span class="co"># first create a new variable called CalfSex1</span></span>
<span id="cb52-3"><a href="data-manipulation-in-r.html#cb52-3"></a><span class="co"># assign it values of CalfSex</span></span>
<span id="cb52-4"><a href="data-manipulation-in-r.html#cb52-4"></a>ideal1<span class="op">$</span>CalfSex1 &lt;-<span class="st"> </span>ideal1<span class="op">$</span>CalfSex</span>
<span id="cb52-5"><a href="data-manipulation-in-r.html#cb52-5"></a><span class="kw">table</span>(ideal1<span class="op">$</span>CalfSex1)</span></code></pre></div>
<pre><code>## 
##  1  2 
## 20 10</code></pre>
<ul>
<li>We use the ``magical" <em>ifelse</em> statement to recode the values</li>
</ul>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="data-manipulation-in-r.html#cb54-1"></a>ideal1<span class="op">$</span>CalfSex1 &lt;-<span class="st"> </span><span class="kw">ifelse</span>(ideal1<span class="op">$</span>CalfSex1<span class="op">==</span><span class="dv">1</span>,<span class="st">&quot;Male&quot;</span>,<span class="st">&quot;Female&quot;</span>)</span>
<span id="cb54-2"><a href="data-manipulation-in-r.html#cb54-2"></a><span class="kw">table</span>(ideal1<span class="op">$</span>CalfSex1)</span></code></pre></div>
<pre><code>## 
## Female   Male 
##     10     20</code></pre>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="data-manipulation-in-r.html#cb56-1"></a><span class="co"># check consistency of the two columns with CalfSex data</span></span>
<span id="cb56-2"><a href="data-manipulation-in-r.html#cb56-2"></a></span>
<span id="cb56-3"><a href="data-manipulation-in-r.html#cb56-3"></a><span class="kw">table</span>(ideal1<span class="op">$</span>CalfSex,ideal1<span class="op">$</span>CalfSex1)</span></code></pre></div>
<pre><code>##    
##     Female Male
##   1      0   20
##   2     10    0</code></pre>
<div id="merging-data" class="section level3">
<h3><span class="header-section-number">3.1.1</span> Merging data</h3>
<ul>
<li><p>Combining different tables with related data is a common need</p></li>
<li><p>It is easy in R, using the function <strong>merge</strong></p></li>
<li><p>Here we will merge <em>ideal1</em> which has 30 records, with <em>ideal2</em> with 270 records</p></li>
<li><p>You need an <em>identifier</em> variable in each table that will be used to link the databases</p></li>
</ul>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="data-manipulation-in-r.html#cb58-1"></a><span class="kw">head</span>(ideal1,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>##        CalfID CalfSex sublocation     CADOB ReasonsLoss           Education
## 1 CA020610151       1      Karisa 3/11/2007          NA    Secondary school
## 2 CA020610152       1      Karisa 4/10/2007          NA No formal education
##   Distance_water RecruitWeight CalfSex1
## 1   At household            19     Male
## 2          &lt;1 km            23     Male</code></pre>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="data-manipulation-in-r.html#cb60-1"></a><span class="kw">head</span>(ideal2,<span class="dv">2</span>)</span></code></pre></div>
<pre><code>##     VisitID      CalfID  VisitDate Weight ManualPCV Theileria.spp. ELISA_mutans
## 1 VRC010151 CA020610151  9/11/2007     19      37.0              0            0
## 2 VRC010152 CA020610152 11/10/2007     23      35.8              0            0
##   ELISA_parva Q.Strongyle.eggs
## 1           0               NA
## 2           0               NA</code></pre>
<div class="sourceCode" id="cb62"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb62-1"><a href="data-manipulation-in-r.html#cb62-1"></a><span class="co">##CalfID is the unique identifier we will use to combine the two datasets</span></span>
<span id="cb62-2"><a href="data-manipulation-in-r.html#cb62-2"></a>ideal3 &lt;-<span class="st"> </span><span class="kw">merge</span>(ideal1,ideal2,<span class="dt">by.x=</span><span class="st">&quot;CalfID&quot;</span>,<span class="dt">by.y=</span><span class="st">&quot;CalfID&quot;</span>, <span class="dt">all.x=</span>T)</span>
<span id="cb62-3"><a href="data-manipulation-in-r.html#cb62-3"></a></span>
<span id="cb62-4"><a href="data-manipulation-in-r.html#cb62-4"></a><span class="kw">dim</span>(ideal1)</span></code></pre></div>
<pre><code>## [1] 30  9</code></pre>
<div class="sourceCode" id="cb64"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb64-1"><a href="data-manipulation-in-r.html#cb64-1"></a><span class="kw">dim</span>(ideal2)</span></code></pre></div>
<pre><code>## [1] 270   9</code></pre>
<div class="sourceCode" id="cb66"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb66-1"><a href="data-manipulation-in-r.html#cb66-1"></a><span class="kw">dim</span>(ideal3)</span></code></pre></div>
<pre><code>## [1] 270  17</code></pre>
<div class="sourceCode" id="cb68"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb68-1"><a href="data-manipulation-in-r.html#cb68-1"></a><span class="kw">head</span>(ideal3,<span class="dv">4</span>)</span></code></pre></div>
<pre><code>##        CalfID CalfSex sublocation      CADOB ReasonsLoss      Education
## 1 CA010110028       1 East Siboti 31/07/2009           7 Primary school
## 2 CA010210036       2      Kidera  12/3/2008           7 Primary school
## 3 CA010210036       2      Kidera  12/3/2008           7 Primary school
## 4 CA010210036       2      Kidera  12/3/2008           7 Primary school
##   Distance_water RecruitWeight CalfSex1   VisitID  VisitDate Weight ManualPCV
## 1          &lt;1 km            19     Male VRC010028   3/8/2009     19        40
## 2         1-5 km            15   Female VRC010036 18/03/2008     15        32
## 3         1-5 km            15   Female VRC060036 23/04/2008     20        38
## 4         1-5 km            15   Female VRC160036   2/7/2008     34        26
##   Theileria.spp. ELISA_mutans ELISA_parva Q.Strongyle.eggs
## 1              0           NA          NA               NA
## 2              0            0           0               NA
## 3              0            0           0              250
## 4              0            0           0             2300</code></pre>
</div>
<div id="subsetting-data" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Subsetting data</h3>
<div class="sourceCode" id="cb70"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb70-1"><a href="data-manipulation-in-r.html#cb70-1"></a><span class="co"># If we wanted data from only one sublocation - Kidera</span></span>
<span id="cb70-2"><a href="data-manipulation-in-r.html#cb70-2"></a></span>
<span id="cb70-3"><a href="data-manipulation-in-r.html#cb70-3"></a>idealkidera &lt;-<span class="st"> </span><span class="kw">subset</span>(ideal3, ideal3<span class="op">$</span>sublocation<span class="op">==</span><span class="st">&quot;Kidera&quot;</span>)</span>
<span id="cb70-4"><a href="data-manipulation-in-r.html#cb70-4"></a><span class="kw">table</span>(idealkidera<span class="op">$</span>sublocation)</span></code></pre></div>
<pre><code>## 
## Kidera 
##     24</code></pre>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="data-manipulation-in-r.html#cb72-1"></a><span class="co"># For data on only females from Kidera</span></span>
<span id="cb72-2"><a href="data-manipulation-in-r.html#cb72-2"></a></span>
<span id="cb72-3"><a href="data-manipulation-in-r.html#cb72-3"></a>idealkideraF &lt;-<span class="st"> </span><span class="kw">subset</span>(ideal3, ideal3<span class="op">$</span>sublocation<span class="op">==</span><span class="st">&quot;Kidera&quot;</span> <span class="op">&amp;</span><span class="st"> </span></span>
<span id="cb72-4"><a href="data-manipulation-in-r.html#cb72-4"></a><span class="st">                         </span>ideal3<span class="op">$</span>CalfSex1<span class="op">==</span><span class="st">&quot;female&quot;</span>)</span></code></pre></div>
</div>
<div id="substring" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Substring</h3>
<ul>
<li><p>It is used to extract substrings in a character vector.</p></li>
<li><p>We will extract the week from the VisitID of each row using the <em>substring</em> function.</p></li>
</ul>
<div class="sourceCode" id="cb73"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb73-1"><a href="data-manipulation-in-r.html#cb73-1"></a> <span class="co"># use the R help function (?substring) to try out how you can extract the 4th and 5th digits of the variable visitID</span></span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="getting-started-with-r.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="data-wrangling.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/rstudio/bookdown-demo/edit/master/02-Datamanipulation.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown-demo.pdf", "bookdown-demo.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
